"use strict";angular.module("GSB.directives.propertyType.string",[]).directive("stringPropertyDir",function(){return{restrict:"A",replace:!0,controller:"StringPropertyCtrl",templateUrl:"template/propertyType/string.html"}}),angular.module("GSB.directives.propertyType.object",[]).directive("objectPropertyDir",function(){return{restrict:"A",replace:!0,controller:"ObjectPropertyCtrl",templateUrl:"template/propertyType/object.html"}}),angular.module("GSB.directives.propertyType.number",[]).directive("numberPropertyDir",function(){return{restrict:"A",replace:!0,controller:"NumberPropertyCtrl",templateUrl:"template/propertyType/number.html"}}).directive("limitInput",function(){return{require:"ngModel",link:function(e,t,r,n){function a(e){return function(t){var r=new RegExp(e.limitInput,"g"),a=t.toLowerCase().replace(r,"");return a=a.replace(/\s+/g," "),a!==t&&(n.$setViewValue(a),n.$render()),a}}n.$parsers.push(a(r))}}}),angular.module("GSB.directives.propertyType.date",["ui.bootstrap"]).directive("datePropertyDir",function(){return{restrict:"A",replace:!0,controller:"DatePropertyCtrl",templateUrl:"template/propertyType/date.html"}}),angular.module("GSB.directives.propertyType.aggregate",[]).directive("aggregatePropertyDir",function(){return{restrict:"E",replace:!0,controller:"AggregatePropertyCtrl",templateUrl:"template/propertyType/aggregate.html"}}),angular.module("GSB.controllers.propertyType.string",["GSB.config"]).controller("StringPropertyCtrl",["$scope","$http","globalConfig",function(e,t,r){function n(t,r,n){return null===r||void 0===r||""===r||void 0===t||null===t?(e.compare=null,void a()):(e.compare=e.allowedStringComparisons[t].f.replace(/%input%/,r).replace(/%flags%/,n),void a())}function a(){e.propertyInst.compareRaw.selectedLanguage=e.selectedLanguage,e.propertyInst.compare=null===e.selectedLanguage||void 0===e.selectedLanguage||""===e.selectedLanguage?e.compare:null===e.compare||void 0===e.compare?'langMatches(lang(%after_arithmetic%), "'+e.selectedLanguage+'")':'langMatches(lang(%after_arithmetic%), "'+e.selectedLanguage+'") && '+e.compare}var o=angular.copy(e.propertyInst.compareRaw);e.allowedStringComparisons=[{label:"CONTAINS",f:'regex(%after_arithmetic%, "%input%", "i")',showFlags:!1},{label:"EQUALS",f:'(str(%after_arithmetic%)="%input%")',showFlags:!1},{label:"EQUALS_NOT",f:'(str(%after_arithmetic%)!="%input%")',showFlags:!1},{label:"STARTS_WITH",f:'regex(%after_arithmetic%, "^%input%", "i")',showFlags:!1},{label:"ENDS_WITH",f:'regex(%after_arithmetic%, "%input%$", "i")',showFlags:!1},{label:"REGEX",f:'regex(%after_arithmetic%, "%input%", "%flags%")',showFlags:!0}],e.allowedLanguages=r.allowedLanguages,e.stringComparison=null,e.comparisonInput="",e.comparisonRegexFlags="i",e.getStringComparisonLabel=function(){return null===e.stringComparison?"NO_COMPARISON":e.allowedStringComparisons[e.stringComparison].label},e.changeStringComparison=function(t){e.stringComparison=t},null!==o&&void 0!==o&&(null!==o.selectedLanguage&&void 0!==o.selectedLanguage&&(e.selectedLanguage=o.selectedLanguage),null!==o.stringComparison&&void 0!==o.stringComparison&&(e.stringComparison=o.stringComparison),null!==o.comparisonInput&&void 0!==o.comparisonInput&&(e.comparisonInput=o.comparisonInput),null!==o.comparisonRegexFlags&&void 0!==o.comparisonRegexFlags&&(e.comparisonRegexFlags=o.comparisonRegexFlags)),e.$watch("stringComparison",function(t){n(t,e.comparisonInput,e.comparisonRegexFlags),e.propertyInst.compareRaw.stringComparison=t,null!==t&&(e.showFlags=e.allowedStringComparisons[t].showFlags)}),e.$watch("comparisonInput",function(t){e.propertyInst.compareRaw.comparisonInput=t,n(e.stringComparison,t,e.comparisonRegexFlags)}),e.$watch("comparisonRegexFlags",function(t){e.propertyInst.compareRaw.comparisonRegexFlags=t,n(e.stringComparison,e.comparisonInput,t)}),e.selectedLanguage=null,e.$watch("selectedLanguage",function(){a()})}]),angular.module("GSB.controllers.propertyType.object",["GSB.config"]).controller("ObjectPropertyCtrl",["$scope",function(e){e.$watch("propertyInst.linkTo",function(t){void 0!==t&&null!==t&&(e.propertyInst.linkTo=t)})}]),angular.module("GSB.controllers.propertyType.number",["GSB.config"]).controller("NumberPropertyCtrl",["$scope",function(e){e.numberArithmetic="";var t=angular.copy(e.propertyInst.compareRaw);e.numberArithmetic="x",e.numberComparison="y",null!==t&&void 0!==t&&(null!==t.numberArithmetic&&void 0!==t.numberArithmetic&&(e.numberArithmetic=t.numberArithmetic),null!==t.numberComparison&&void 0!==t.numberComparison&&(e.numberComparison=t.numberComparison)),e.$watch("numberArithmetic",function(t){(""===t||null===t||void 0===t)&&(t="x"),e.propertyInst.compareRaw.numberArithmetic=t,e.propertyInst.arithmetic="x"===t?null:t.replace(/x/g,"%before_arithmetic%")}),e.$watch("numberComparison",function(t){(""===t||null===t||void 0===t)&&(t="y"),e.propertyInst.compareRaw.numberComparison=t,e.propertyInst.compare="x"===t||"y"===t?null:t.replace(/x/g,"%before_arithmetic%").replace(/y/g,"%after_arithmetic%")})}]),angular.module("GSB.controllers.propertyType.date",["GSB.config","ui.bootstrap"]).controller("DatePropertyCtrl",["$scope",function(e){function t(){if(null!==e.dateComparison&&e.comparisonInput instanceof Date){var t=e.comparisonInput;e.propertyInst.compare=e.allowedDateComparisons[e.dateComparison].f.replace(/%input_start_of_day%/g,moment(t).hour(0).minute(0).second(0).format()).replace(/%input_end_of_day%/g,moment(t).hour(23).minute(59).second(59).format())}else e.propertyInst.compare=null}e.open=function(t){t.preventDefault(),t.stopPropagation(),e.opened=!0};var r=angular.copy(e.propertyInst.compareRaw);e.allowedDateComparisons=[{label:"EQUALS",f:'xsd:dateTime(%after_arithmetic%) >= "%input_start_of_day%"^^xsd:dateTime&& xsd:dateTime(%after_arithmetic%) <= "%input_end_of_day%"^^xsd:dateTime'},{label:"EQUALS_NOT",f:'xsd:dateTime(%after_arithmetic%) < "%input_start_of_day%"^^xsd:dateTime|| xsd:dateTime(%after_arithmetic%) > "%input_end_of_day%"^^xsd:dateTime'},{label:"AFTER",f:'xsd:dateTime(%after_arithmetic%) > "%input_end_of_day%"^^xsd:dateTime'},{label:"BEFORE",f:'xsd:dateTime(%after_arithmetic%) < "%input_start_of_day%"^^xsd:dateTime'}],e.getDateComparisonLabel=function(t){return e.allowedDateComparisons[t].label},e.changeDateComparison=function(t){e.dateComparison=t},e.dateComparison=0,e.comparisonInput=new Date,null!==r&&void 0!==r&&(null!==r.dateComparison&&void 0!==r.dateComparison&&(e.dateComparison=r.dateComparison),null!==r.comparisonInput&&void 0!==r.comparisonInput&&(e.comparisonInput=new Date(r.comparisonInput))),e.$watch("dateComparison",function(r){e.propertyInst.compareRaw.dateComparison=r,t()}),e.$watch("comparisonInput",function(r){e.propertyInst.compareRaw.comparisonInput=r,t()})}]),angular.module("GSB.controllers.propertyType.aggregate",["GSB.config"]).controller("AggregatePropertyCtrl",["$scope",function(e){e.$watch("selected",function(t){void 0!==t&&null!==t&&(e.propertyInst.alias=t.alias,e.propertyInst.operator=t.operator,null!==t.restrictTo&&void 0!==e.linkTo&&null!==e.linkTo&&t.restrictTo!==e.linkTo.type&&(e.linkTo=null))}),e.$watch("link",function(t){void 0!==t&&null!==t&&(e.propertyInst.linkTo=t.alias)})}]),angular.module("GSB.services.translatorToSPARQL",["GSB.config"]).factory("TranslatorToSPARQL",function(){function e(e){var t=new RegExp("[^A-Za-z0-9_?]","g");return e.replace(t,"_").replace(/_+/g,"_").replace(/^_|_$/,"")}function t(t,r,n,a,o){return null!==a&&(n=l.NodeFactory.createVar(e(a)),o=!1),{s:t,p:r,o:n,view:o}}function r(r,n,o){var i,c=e(n+" "+r.alias),u=r.uri,d=r.type,g=new s.ElementTriplesBlock,f=l.NodeFactory.createVar(n),m=l.NodeFactory.createUri(u),v=l.NodeFactory.createVar(c),S=v,y=o&&r.view;return"INVERSE_PROPERTY"===d?(i=t(f,m,v,r.linkTo,y),f=i.o,S=i.s,y=i.view,d="OBJECT_PROPERTY"):"OBJECT_PROPERTY"===d&&(i=t(f,m,v,r.linkTo,y),S=i.o,y=i.view),r.filterExists?(r.hasFilter&&null!==r.arithmetic&&(S=l.NodeFactory.createVar(e(c+" temp"))),g.addTriples([new l.Triple(f,m,S)]),r.hasFilter&&(null!==r.arithmetic&&(r.arithmetic=r.arithmetic.replace(/%before_arithmetic%/g,S).replace(/%after_arithmetic%/g,v),g.addTriples([new s.ElementBind(v,r.arithmetic)])),null!==r.compare&&(r.compare=r.compare.replace(/%before_arithmetic%/g,S).replace(/%after_arithmetic%/g,v),g.addTriples([new s.ElementFilter(r.compare)]))),y&&!a.contains(l.NodeFactory.createVar(c))&&(a.add(l.NodeFactory.createVar(c)),"OBJECT_PROPERTY"===d&&p.add(l.NodeFactory.createVar(c)))):g.addTriples([new s.ElementFilter(new s.E_NotExists(new l.Triple(f,m,v)))]),r.optional?new s.ElementOptional(g):g}function n(t){var n=e(t.alias),o=l.NodeFactory.createVar(e(n)),i=l.NodeFactory.createUri(t.uri),d=new s.ElementTriplesBlock;return d.addTriples([new l.Triple(o,c.rdf.type,i)]),t.view&&!a.contains(o,n)&&(a.add(o),p.add(o),""===u&&(u=o)),t.hasOwnProperty("properties")&&t.properties.forEach(function(e){d.addTriples(r(e,n,t.view))}),d}var a,o={},i=new Jassa(Promise,$.ajax),s=i.sparql,l=i.rdf,c=i.vocab,p=new s.VarExprList,u="";return o.translateJSONToSPARQL=function(e){a=new s.VarExprList;var t=new s.Query,r=new s.ElementTriplesBlock;return e.hasOwnProperty("SUBJECTS")&&e.SUBJECTS.forEach(function(e){r.addTriples(n(e))}),t.setQueryPattern(r),t.setProjectVars(a),t.setDistinct(!0),t},o.translateJSONToSponateMap=function(e){p=new s.VarExprList,u="",a=new s.VarExprList;var t,r=new s.ElementTriplesBlock;return e.hasOwnProperty("SUBJECTS")&&e.SUBJECTS.forEach(function(e){r.addTriples(n(e))}),t={name:(new Date).toISOString(),template:[{id:u.toString(),rows:[{id:"?rowId"}]}],from:r.toString()},a.getVars().forEach(function(e){var r=e.toString().replace(/^\?/,"");p.contains(e)&&(r="$"+r),t.template[0].rows[0][r]=e.toString()}),t},o}),angular.module("GSB.services.translatorToJSON",["GSB.config"]).factory("TranslatorToJSON",["globalConfig","$log","$localForage",function(e,t,r){var n=function(e){for(var t in e)e.hasOwnProperty(t)&&t.startsWith("$")&&delete e[t];return e},a={};return a.translateGSBLToJSON=function(a,o){if(t.debug("Translate GSBL to JSON"),null===a)return t.error("Main Subject not connected"),null;var i={CONFIG:e.name,START:{type:"LIST_ALL",linkTo:a.alias},SUBJECTS:[]},s=_.cloneDeep(o);return s.map(function(e){return e.properties=e.$selectedProperties.map(function(e){return e.linkTo="STANDARD_PROPERTY"!==e.type&&e.hasOwnProperty("linkTo")&&null!==e.linkTo&&e.linkTo.hasOwnProperty("alias")?e.linkTo.alias:null,n(e)}),e.$selectedAggregates=e.$selectedAggregates.map(function(e){return n(e)}),e.properties=e.properties.concat(e.$selectedAggregates),n(e)}),i.SUBJECTS=s,r.set("current",i).then(function(){t.debug("Current Workspace saved into localForage")}),JSON.stringify(i,null,2)},a}]),angular.module("GSB.services.translatorToGSBL",["GSB.config"]).factory("TranslatorToGSBL",["globalConfig","$log",function(e,t){var r={};return r.translateJSONToGSBL=function(e){if(t.debug("Translate JSON to GSBL"),null===e)return t.error("Empty JSON File"),null;for(var r=[],n=[],a=0;a<e.SUBJECTS.length;a++){for(var o=[],i=e.SUBJECTS[a],s=0;s<i.properties.length;s++){var l=i.properties[s];o.push({$copied:!0,alias:l.alias,uri:l.uri,type:l.type,view:l.view,optional:l.optional,filterExists:l.filterExists,hasFilter:l.hasFilter,linkTo:l.linkTo,arithmetic:l.arithmetic,compare:l.compare,compareRaw:l.compareRaw})}r.push({alias:i.alias,uri:i.uri,pos:i.pos,view:i.view,$selectedAggregates:[],$selectedProperties:o,$copied:!0})}var c=r[0];for(a=0;a<r.length;a++)e.START.linkTo===r[a].alias&&(c=r[a]);return n.push(r),n.push(c),n},r}]),angular.module("GSB.services.translatorManager",["GSB.config"]).factory("TranslatorManager",["$log","globalConfig","$rootScope","TranslatorToJSON","TranslatorToGSBL","TranslatorToSPARQL",function(e,t,r,n,a,o){var i={};return i.prepareSaveLink=function(e,t){var r=n.translateGSBLToJSON(e,t),a=new Blob([r],{type:"application/json"});document.getElementById("saveLink").href=URL.createObjectURL(a)},i.loadJSON=function(){var t,n,o=document.getElementById("uploadJSON").files[0],i=new FileReader;i.onloadend=function(o){if(n=o.target.result,n.trim(),t=JSON.parse(n),null===t)return void e.error("JSON is not valid / empty");var i=a.translateJSONToGSBL(t);r.$broadcast("WorkspaceUpdateFromJSONEvent",i)},i.readAsBinaryString(o)},i.translateGSBLToSPARQL=function(t,a){var i=n.translateGSBLToJSON(t,a);if(r.$broadcast("JSONUpdateEvent",i),null===i)return void e.error("JSON is not valid / empty");var s=o.translateJSONToSPARQL(JSON.parse(i));r.$broadcast("SPARQLQueryUpdateEvent",s);var l=o.translateJSONToSponateMap(JSON.parse(i));r.$broadcast("SPARQLUpdateEvent",l)},i}]),angular.module("GSB.services.languageService",["GSB.config","pascalprecht.translate"]).config(["$translateProvider","globalConfig",function(e,t){t.fallBackLanguages.push("default"),e.useLoader("languageLoader").fallbackLanguage(t.fallBackLanguages).determinePreferredLanguage()}]).factory("languageLoader",["languageStorage",function(e){return function(t){return e.getItem(t.key)}}]).factory("languageStorage",["$q",function(e){var t={"default":{ADD_A_AGGREGATE:"Add an aggregate",ADD_FILTER:"add filter",AFTER:"after",ARITHMETICS:"arithmetics",A_LINK_TO:"a link to",BACK_TO_WORKSPACE:"Workspace",BEFORE:"before",BUTTON_LANG_DE:"german",BUTTON_LANG_EN:"english",CHOOSE_A_PROPERTY:"Choose a property",CHOOSE_A_SUBJECT:"Choose a subject",COMPARISON:"comparison",CONTAINS:"contains",DELETE_PROPERTY:"delete property",DOWNLOAD_JSON:"Download JSON",ENDS_WITH:"ends with",EQUALS:"equals",EQUALS_NOT:"equals not",EXISTS:"exists",EXISTS_NOT:"exists not",HIDE_PROPERTY:"hide property",HIDE_QUERIES:"hide queries",IS_MANDATORY:"is mandatory",IS_OPTIONAL:"is optional",JSON:"JSON",LANGUAGE:"language",LINK_WITH_SUBJECT:"Link with a subject",LIST_ALL:"List all",LOAD_JSON:"Load JSON",NO_COMPARISON:"no comparison",PICK_MAIN_SUBJECT:"Pick a main subject",PROPERTY:"property",QUERIES:"Queries",REGEX:"regex",REMOVE_FILTER:"remove filter",RESET_WORKSPACE:"Reset Workspace",RESULTS:"Results",RUN_QUERY:"Run Query",SELECT_LANGUAGE:"Select a language",SHOW_PROPERTY:"show property",SHOW_QUERIES:"show queries",SPARQL:"SPARQL",STARTS_WITH:"starts with",WORKSPACE:"Workspace",TITLE:"Graphical SPARQL Builder"}},r={};return r.mergeLanguages=function(e){t=_.merge(t,e)},r.setItem=function(e,r,n){t.hasOwnProperty(e)||(t[e]={}),t[e][r]=n},r.getItem=function(r){var n=e.defer();return n.resolve(t.hasOwnProperty(r)?t[r]:{}),n.promise},r}]),angular.module("GSB.services.endPoint",["GSB.config"]).factory("EndPointService",["$http","$q","$log","globalConfig","languageStorage",function(e,t,r,n,a){var o={},i=new Jassa(Promise,$.ajax),s=i.sparql,l=i.service,c=i.sponate,p=new l.SparqlServiceHttp(n.baseURL,n.defaultGraphURIs);p=new l.SparqlServiceCache(p);var u=new c.StoreFacade(p,n.prefixes);o.runSponateMap=function(e){var t=e.name,r=["de","en",""],n=new s.BestLabelConfig(r),a=c.MappedConceptUtils.createMappedConceptBestLabel(n);e.template[0].rows[0]=_.mapValues(e.template[0].rows[0],function(e,t){return _.startsWith(t,"$")?{id:e,label:{$ref:{target:a,on:e,attr:"displayLabel"}}}:e}),u.addMap(e);var o=u[t].find().limit(100);return o.list()};var d=function(e){return null===e||void 0===e?e:e.replace(/^<+/,"").replace(/>+$/,"")};o.extractLabelFromURI=function(e){e=d(e);var t=e.lastIndexOf("#"),r=e.lastIndexOf("/");return e.substr(t>r?t+1:r+1)};var g=function(e,t,r){t.forEach(function(t){a.setItem(t.id,e+".$label",t.value)}),a.setItem("default",e+".$label",o.extractLabelFromURI(e)),r.forEach(function(t){a.setItem(t.id,e+".$comment",t.value)})};o.getPropertyType=function(e){var t=_.find(n.propertyTypeByType,function(t,r){return new RegExp(r).test(e.$type)});return t?t:(t=_.find(n.propertyTypeByRange,function(t,r){return new RegExp(r).test(e.$range)}),t?t:"STANDARD_PROPERTY")},o.getAvailableClasses=function(e){u.hasOwnProperty("classes")||u.addMap({name:"classes",template:[{id:"?uri",$labels:[{id:"?label_loc",value:"?label"}],$comments:[{id:"?comment_loc",value:"?comment"}]}],from:n.endPointQueries.getAvailableClasses});var t=u.classes.find();return t.list().then(function(t){return t=_.pluck(t,"val"),e&&(t=_.filter(t,{id:"<"+d(e)+">"})),t.forEach(function(e){e.uri=d(e.id),g(e.uri,e.$labels,e.$comments)}),t}).catch(function(e){r.error("Getting Classes:",e)})};var f=function(e,t,n){u.hasOwnProperty(n+e)||u.addMap({name:n+e,template:[{id:"?uri"}],from:t});var a=u[n+e].find();return a.list().then(function(e){return _.pluck(_.pluck(e,"val"),"id")}).catch(function(e){r.error("An error occurred: ",e)})};o.getSuperAndEqClasses=function(e){return f(d(e),n.endPointQueries.getSuperAndEqClasses.replace("%uri%",d(e)),"SuperAndEqClasses")},o.getSubAndEqClasses=function(e){return f(d(e),n.endPointQueries.getSubAndEqClasses.replace("%uri%",d(e)),"SubAndEqClasses")};var m=function(e,t,n,a){var i=n?"InverseProperties":"DirectProperties";u.hasOwnProperty(i+e)||u.addMap({name:i+e,template:[{id:"?uri",$labels:[{id:"?label_loc",value:"?label"}],$comments:[{id:"?comment_loc",value:"?comment"}],$range:[{id:"?range"}],$type:"?type"}],from:t});var s=u[i+e].find();return s.list().then(function(e){return e=_.pluck(e,"val"),a&&(e=_.filter(e,{id:"<"+d(a)+">"})),e.forEach(function(e){e.$range=_.pluck(e.$range,"id"),e.uri=d(e.id),g(e.uri,e.$labels,e.$comments),e.type=n?"INVERSE_PROPERTY":o.getPropertyType(e)}),e}).catch(function(e){r.error("An error occurred: ",e)})};return o.getDirectProperties=function(e,t){return m(d(e),n.endPointQueries.getDirectProperties.replace("%uri%",e),!1,t)},o.getInverseProperties=function(e,t){return m(d(e),n.endPointQueries.getInverseProperties.replace("%uri%",e),!0,t)},o.getPropertyDetails=function(e,t){return"INVERSE_PROPERTY"===t.type?o.getInverseProperties(d(e),t.uri):o.getDirectProperties(d(e),t.uri)},o}]),angular.module("GSB.directives.subject",[]).directive("subjectDir",["$document",function(e){return{restrict:"E",replace:!0,controller:"SubjectInstanceCtrl",templateUrl:"template/subject.html",link:function(t,r){function n(e){p+=e,t.subjectInst.pos.x=p,r.css({left:p+"px"})}function a(e){u+=e,t.subjectInst.pos.y=u,r.css({top:u+"px"})}function o(e){u=e.pageY-c,p=e.pageX-l,t.subjectInst.pos.x=p,t.subjectInst.pos.y=u,r.css({top:u+"px",left:p+"px"})}function i(){t.dragging=!1,t.$digest(),e.unbind("mousemove",o),e.unbind("mouseup",i)}var s=t.subjectInst.pos,l=0,c=0,p=s.x||150,u=s.y||250;t.$watch("offsetX",function(e){n(e)}),t.$watch("offsetY",function(e){a(e)}),r.find("mover").on("mousedown",function(r){r.preventDefault(),t.dragging=!0,t.$digest(),l=r.pageX-p,c=r.pageY-u,e.on("mousemove",o),e.on("mouseup",i)})}}}]),angular.module("GSB.directives.startPoint",[]).directive("startPointDir",function(){return{restrict:"A",link:function(e,t){t.on("mouseenter",function(){e.$emit("setHighLightTo",e.mainSubjectSelected),e.$apply()}),t.on("mouseleave",function(){e.$emit("setHighLightTo",{}),e.$apply()})}}}),angular.module("GSB.directives.property",[]).directive("propertyDir",function(){return{restrict:"E",replace:!0,controller:"PropertyInstanceCtrl",templateUrl:"template/property.html",link:function(e,t){t.on("mouseenter",function(){e.$emit("setHighLightTo",e.propertyInst.linkTo),e.$apply()}),t.on("mouseleave",function(){e.$emit("setHighLightTo",{}),e.$apply()})}}}),angular.module("GSB.controllers.subjectInstance",["GSB.config","GSB.services.endPoint"]).controller("SubjectInstanceCtrl",["$scope","$log","$translate","EndPointService",function(e,t,r,n){e.toggleSubjectView=function(){e.subjectInst.view=!e.subjectInst.view},n.getSuperAndEqClasses(e.subjectInst.uri).then(function(r){t.debug("SUBJECT Additional Classes loaded for "+e.subjectInst.uri,r),e.subjectInst.$classURIs=r}).catch(function(e){t.error(e)}),e.subjectInst.alias||r(e.subjectInst.uri+".$label").then(function(t){for(var r=t,n=1;e.doesAliasExist(r);)r=t+"_"+n,n+=1;e.subjectInst.alias=r})}]),angular.module("GSB",["GSB.config","GSB.filters","GSB.controllers.main","GSB.controllers.subjectCollection","GSB.controllers.subjectInstance","GSB.controllers.propertyCollection","GSB.controllers.propertyInstance","GSB.controllers.propertyType.object","GSB.controllers.propertyType.aggregate","GSB.controllers.propertyType.number","GSB.controllers.propertyType.string","GSB.controllers.propertyType.date","GSB.directives.subject","GSB.directives.property","GSB.directives.startPoint","GSB.directives.propertyType.object","GSB.directives.propertyType.number","GSB.directives.propertyType.string","GSB.directives.propertyType.date","GSB.directives.propertyType.aggregate","GSB.services.endPoint","GSB.services.languageService","GSB.services.translatorManager","GSB.services.translatorToJSON","GSB.services.translatorToGSBL","GSB.services.translatorToSPARQL","LocalForageModule"]).config(["uiSelectConfig",function(e){e.theme="bootstrap"}]),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return 0===this.indexOf(e)}),angular.module("GSB").run(["$templateCache",function(e){e.put("template/property.html",'<div class=propertyCSS ng-class="propertyInst.filterExists ? \'\' : \'notExists\'"><div class=propertyHeadCSS><p><div class="dropdown pull-right icon-list" on-toggle=toggled(open)>&nbsp;<i class="fa fa-fw fa-ellipsis-h dropdown-toggle"></i><ul class=dropdown-menu role=menu><li ng-show=propertyInst.hasFilter><a href=# ng-click=toggleHasFilter()><i class="fa fa-fw fa-filter"></i> {{\'REMOVE_FILTER\' | translate}}</a></li><li ng-hide=propertyInst.hasFilter><a href=# ng-click=toggleHasFilter()><i class="fa fa-fw fa-filter"></i> {{\'ADD_FILTER\' | translate}}</a></li><li ng-show=propertyInst.filterExists><a href=# ng-click=togglePropertyExists()><i class="fa fa-fw fa-square-o"></i> {{\'EXISTS_NOT\' | translate}}</a></li><li ng-hide=propertyInst.filterExists><a href=# ng-click=togglePropertyExists()><i class="fa fa-fw fa-check-square-o"></i> {{\'EXISTS\' | translate}}</a></li><li ng-show="propertyInst.filterExists && !propertyInst.optional"><a href=# ng-click=togglePropertyOptional()><i class="fa fa-fw fa-question-circle"></i> {{\'IS_OPTIONAL\' | translate}}</a></li><li ng-show="propertyInst.filterExists && propertyInst.optional"><a href=# ng-click=togglePropertyOptional()><i class="fa fa-fw fa-exclamation-circle"></i> {{\'IS_MANDATORY\' | translate}}</a></li><li ng-hide=propertyInst.view><a href=# ng-click=togglePropertyView()><i class="fa fa-fw fa-eye"></i> {{\'SHOW_PROPERTY\' | translate}}</a></li><li ng-show=propertyInst.view><a href=# ng-click=togglePropertyView()><i class="fa fa-fw fa-eye-slash"></i> {{\'HIDE_PROPERTY\' | translate}}</a></li><li><a href=# ng-click=removeProperty(propertyInst)><i class="fa fa-fw fa-trash-o"></i> {{\'DELETE_PROPERTY\' | translate}}</a></li></ul></div><span class="pull-right icon-list"><i class="fa fa-square-o fa-fw" ng-hide=propertyInst.filterExists ng-click=togglePropertyExists()></i> <i class="fa fa-fw fa-question-circle" ng-show="propertyInst.filterExists && propertyInst.optional" ng-click=togglePropertyOptional()></i>  <i class="fa fa-fw fa-eye-slash" ng-hide=propertyInst.view ng-click=togglePropertyView()></i>  <i class="fa fa-fw fa-info-circle" ng-if="(propertyInst.uri + \'.$comment\' | translate) !== propertyInst.uri + \'.$comment\'" popover="{{propertyInst.uri +\'.$comment\' | translate}}" popover-trigger="{{dragging ? \'none\' : \'mouseenter\'}}" popover-placement=top popover-append-to-body=true></i></span>  <b><span class=h5><b>{{propertyInst.alias}}</b></span> <i class="fa fa-edit pointer" ng-click="propertyInst.editAlias = true"></i> <small><small>({{ propertyInst.uri | replaceURIsWithPrefixes}})</small></small></b></p><div class=input-group ng-show=propertyInst.editAlias><input size=30 maxlength=40 class=form-control placeholder=Alias ng-model=propertyInst.alias><div class=input-group-btn><button class="btn btn-success" ng-click="propertyInst.editAlias = false"><i class="fa fa-check-square-o"></i></button></div></div><div class=clearfix></div></div><div class=propertyBodyCSS><div class=propertyFilters ng-show="propertyInst.filterExists && propertyInst.hasFilter" ng-switch on=propertyInst.type><div ng-switch-when=OBJECT_PROPERTY><div object-property-dir></div></div><div ng-switch-when=NUMBER_PROPERTY><div number-property-dir></div></div><div ng-switch-when=STRING_PROPERTY><div string-property-dir></div></div><div ng-switch-when=STANDARD_PROPERTY><div string-property-dir></div></div><div ng-switch-when=INVERSE_PROPERTY><div object-property-dir></div></div><div ng-switch-when=DATE_PROPERTY><div date-property-dir></div></div><div ng-switch-default></div></div><div class=clearfix></div></div></div>'),e.put("template/subject.html",'<div class="subjectCSS box" ng-class="{true: \'highlight-subject\'}[highlightedSubject.alias == subjectInst.alias]" style="position:absolute;z-index: 5"><div class=subjectHeadCSS><p><span class="pull-right icon-list"><mover><i class="fa fa-fw fa-arrows"></i></mover><i class="fa fa-fw fa-info-circle" ng-if="(subjectInst.uri + \'.$comment\' | translate) !== subjectInst.uri + \'.$comment\'" popover="{{subjectInst.uri + \'.$comment\' | translate}}" popover-trigger="{{dragging ? \'none\' : \'mouseenter\'}}" popover-placement=right popover-append-to-body=true></i>  <i class="fa fa-fw fa-eye" ng-show=subjectInst.view ng-click=toggleSubjectView()></i> <i class="fa fa-fw fa-eye-slash" ng-hide=subjectInst.view ng-click=toggleSubjectView()></i>  <i class="fa fa-fw fa-trash-o" ng-click=removeSubject(subjectInst)></i></span>  <b><span class=h4>{{subjectInst.alias}}</span> <i class="fa fa-edit pointer" ng-click="subjectInst.editAlias = true"></i>  <small><small>({{ subjectInst.uri | replaceURIsWithPrefixes}})</small></small></b></p><p class="input-group pull-left" ng-show=subjectInst.editAlias><input size=30 maxlength=40 class=form-control placeholder=Alias ng-model=subjectInst.alias> <span class="btn input-group-addon btn-success" ng-click="subjectInst.editAlias = false"><i class="fa fa-check-square-o"></i></span></p></div><div class=subjectBodyCSS ng-controller=PropertyCollectionCtrl><div class=clearfix></div><property-dir ng-repeat="propertyInst in subjectInst.$selectedProperties"></property-dir><aggregate-property-dir ng-repeat="propertyInst in subjectInst.$selectedAggregates"></aggregate-property-dir><div ng-hide=subjectInst.showAddProperty class=text-center><div class="btn btn-sm btn-success" ng-click="subjectInst.showAddProperty = true"><span class="fa fa-plus"></span> {{ \'PROPERTY\' | translate }}</div></div><div ng-show=subjectInst.showAddProperty><div class=row><div class=input-group><ui-select ng-model=$parent.propertySelected><ui-select-match placeholder="{{ \'CHOOSE_A_PROPERTY\' | translate }}">{{$select.selected.uri + \'.$label\' | translate}}</ui-select-match><ui-select-choices group-by="\'type\'" repeat="item in subjectInst.$availableProperties |\n                        filter: $select.search |\n                        orderBy:\'type\' |\n                        limitTo: 50"><p style="margin: 0"><i class="fa fa-info-circle pull-right" ng-if="(item.uri + \'.$comment\' | translate) !== item.uri + \'.$comment\'" popover="{{item.uri + \'.$comment\' | translate}}" popover-trigger=mouseenter popover-append-to-body=true></i> <strong ng-bind-html="item.uri + \'.$label\' | translate | highlight: $select.search"></strong> <small><small ng-bind-html="item.uri | replaceURIsWithPrefixes"></small></small></p></ui-select-choices></ui-select><span class=input-group-btn><button ng-click=addProperty() class="btn btn-success"><span class="fa fa-plus"></span></button></span></div></div></div></div></div>'),e.put("template/propertyType/aggregate.html",'<div class=propertyCSS><div class=propertyHeadCSS><div class=pull-right><a href=# ng-click=removeAggregate(propertyInst)><i class="fa fa-trash-o"></i></a></div><div><b>{{selected.alias}}({{link.alias}})</b></div></div><div class=propertyBodyCSS><select ng-model=selected ng-options="x as x.alias for x in propertyInst.$available"><option value="">Select an aggregate function</option></select><select ng-model=linkTo ng-options="x as x.alias for x in subjectInst.$selectedProperties | aggregatePropertyFilter:selected"><option value="">Choose a Property</option></select></div></div>'),e.put("template/propertyType/date.html",'<div><div class="input-group input-group-sm"><div class="input-group-btn dropdown" is-open=status.isopen><button type=button class="btn btn-default dropdown-toggle">{{getDateComparisonLabel(dateComparison) | translate}} <span class=caret></span></button><ul class=dropdown-menu role=menu><li ng-repeat="(idx,x) in allowedDateComparisons"><a href=# ng-click=changeDateComparison(idx)>{{x.label | translate}}</a></li></ul></div><input class=form-control datepicker-popup=yyyy-MM-dd ng-model=comparisonInput is-open=opened datepicker-options="{ formatYear: \'yy\', startingDay: 1}" ng-required=true close-text="Close"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=open($event)><i class="fa fa-calendar"></i></button></span></div></div>'),e.put("template/propertyType/number.html",'<div><div class="input-group input-group-sm"><div class=input-group-addon>{{\'ARITHMETICS\' | translate}}</div><input class=form-control ng-model=numberArithmetic limit-input="[^\\-\\*\\/\\.\\+()\\d xe]"></div><div class="input-group input-group-sm" style="margin-top: 5px"><div class=input-group-addon>{{\'COMPARISON\' | translate}}</div><input class=form-control ng-model=numberComparison limit-input="[^\\-\\*\\/\\.\\+()><=!\\d xye]"></div></div>'),e.put("template/propertyType/object.html",'<div><div class="input-group input-group-sm"><div class=input-group-addon>{{\'A_LINK_TO\' | translate}}</div><select ng-model=propertyInst.linkTo class="form-control input-sm" ng-options="x as x.alias for x in subjects | objectPropertyFilter : \'$classURIs\' : propertyInst.$range" title="Link with a subject"><option value="">{{\'LINK_WITH_SUBJECT\' | translate}}</option></select><div class=input-group-addon>{{\'EXISTS\' | translate}}</div></div></div>'),e.put("template/propertyType/string.html",'<div><div class="input-group input-group-sm"><div class=input-group-addon>{{\'LANGUAGE\' | translate}}</div><select ng-model=selectedLanguage ng-options="x as x for x in allowedLanguages" title=Select class="form-control input-sm"><option value="">{{\'SELECT_LANGUAGE\' | translate}}</option></select></div><div class="input-group input-group-sm" style="margin-top: 5px"><div class=input-group-addon>{{\'COMPARISON\' | translate}}</div><div class="input-group-btn dropdown" is-open=dd2.isopen><button type=button class="btn dropdown-toggle btn-default" style="border-radius: 0;border-right: 0">{{getStringComparisonLabel() | translate}} <span class=caret></span></button><ul class=dropdown-menu role=menu><li><a href=# ng-click=changeStringComparison(null)>{{}}</a></li><li ng-repeat="(idx,x) in allowedStringComparisons"><a href=# ng-click=changeStringComparison(idx)>{{x.label | translate}}</a></li></ul></div><input ng-disabled="stringComparison === null" class="form-control input-sm" ng-model=comparisonInput> <span ng-show=showFlags class=input-group-btn style=width:0></span> <input ng-show=showFlags class="form-control input-sm" ng-model=comparisonRegexFlags style="border-left:0"></div></div>')}]),angular.module("GSB.controllers.subjectCollection",["ngSanitize","ui.select","GSB.config","GSB.services.endPoint"]).controller("SubjectCollectionCtrl",["$scope","$q","$log","EndPointService","globalConfig","TranslatorManager","TranslatorToGSBL","$localForage","$translate",function(e,t,r,n,a,o,i,s,l){e.highlightedSubject=null,e.mainSubjectSelected=null,e.availableSubjectClasses=[],e.selectedSubjectClass=void 0,e.uiAddSubject=function(){if(e.selectedSubjectClass){var t=e.selectedSubjectClass;c(t.uri),e.selectedSubjectClass=void 0}};var c=function(t){r.debug("SUBJECT added "+t),e.initialisedSubjects=!0,e.subjects.push({uri:t,$classURIs:[t],view:!0,$selectedProperties:[],$availableProperties:[],$selectedAggregates:[],pos:{}})};e.$watchCollection("subjects",function(t){e.$emit(0===t.length?"disableButton":"enableButton"),1===t.length&&(e.mainSubjectSelected=t[0])
});var p=function(t){r.debug("SUBJECT added "+t.uri,t),e.subjects.push(t)};e.doesAliasExist=function(t){return _.filter(e.subjects,{alias:t}).length>0},e.removeSubject=function(t){e.subjects.splice(e.subjects.indexOf(t),1)},e.removeAllSubjects=function(){e.subjects=[]},e.fillScopeWithSubjects=function(t){for(var r=0;r<t[0].length;r++)p(t[0][r]);e.mainSubjectSelected=t[1]},e.$on("setHighLightTo",function(t,r){e.highlightedSubject=r}),e.$on("translationEvent",function(t,r){o.translateGSBLToSPARQL(e.mainSubjectSelected,e.subjects,r),o.prepareSaveLink(e.mainSubjectSelected,e.subjects)}),e.$on("saveJsonEvent",function(){o.saveAsJSON(e.mainSubjectSelected,e.subjects)}),e.$on("loadJsonEvent",function(){o.loadJSON(e.mainSubjectSelected,e.subjects)}),e.$on("removeAllSubjectsEvent",function(){e.removeAllSubjects()}),e.$on("JSONUpdateEvent",function(t,r){e.$parent.translatedJSON=r}),e.$on("SPARQLQueryUpdateEvent",function(t,r){e.$parent.translatedSPARQL=r.toString()}),e.$on("WorkspaceUpdateFromJSONEvent",function(t,r){e.fillScopeWithSubjects(r)}),e.availableSubjectClasses=[],e.subjects=[],s.getItem("current").then(function(t){null!==t&&t.CONFIG===a.name&&e.fillScopeWithSubjects(i.translateJSONToGSBL(t))}),n.getAvailableClasses().then(function(t){r.debug("Classes loaded ",t),l.refresh(),e.availableSubjectClasses=t}).catch(function(e){r.error("An error occurred: ",e)})}]),angular.module("GSB.controllers.propertyInstance",["GSB.config"]).controller("PropertyInstanceCtrl",["$scope","$log","$q","$translate","EndPointService",function(e,t,r,n,a){e.togglePropertyView=function(){e.propertyInst.view=!e.propertyInst.view},e.togglePropertyExists=function(){e.propertyInst.filterExists=!e.propertyInst.filterExists},e.toggleHasFilter=function(){e.propertyInst.hasFilter=!e.propertyInst.hasFilter},e.togglePropertyOptional=function(){e.propertyInst.optional=!e.propertyInst.optional};var o=function(t){if(void 0!==t){var n=angular.copy(t),o=[];return n.forEach(function(e){o.push(a.getSubAndEqClasses(e))}),r.all(o).then(function(t){return t=_.uniq(_.flatten(t)),e.propertyInst.$range=t,e.propertyInst}).then(function(e){"INVERSE_PROPERTY"!==e.type&&(e.type=a.getPropertyType(e))})}};e.propertyInst.$copied?a.getPropertyDetails(e.subjectInst.uri,e.propertyInst).then(function(t){return t=t[0],void 0!==t?(e.propertyInst.$range=t.$range,e.propertyInst.type=t.type,t.$range):void 0}).then(o).catch(function(e){t.error(e)}):o(e.propertyInst.$range),e.propertyInst.alias||n(e.propertyInst.uri+".$label").then(function(t){for(var r=t,n=1;e.doesAliasExist(r);)r=t+"_"+n,n+=1;e.propertyInst.alias=r}),e.$watch("propertyInst.linkTo",function(t){if("string"==typeof t)for(var r=e.subjects,n=0,a=r.length;a>n;n++)if(r[n].hasOwnProperty("alias")&&r[n].alias===t)return void(e.propertyInst.linkTo=r[n])})}]),angular.module("GSB.controllers.propertyCollection",["GSB.config","GSB.services.endPoint"]).controller("PropertyCollectionCtrl",["$scope","$http","$q","$log","$translate","globalConfig","EndPointService",function(e,t,r,n,a,o,i){var s=e.subjectInst.$selectedProperties;e.subjectInst.$availableProperties=[],i.getDirectProperties(e.subjectInst.uri).then(function(t){n.debug("PROPERTIES (direkt) loaded for "+e.subjectInst.uri,t),a.refresh(),e.subjectInst.$availableProperties=_.union(e.subjectInst.$availableProperties,t)}).catch(function(e){n.error("An error occurred: ",e)}),i.getInverseProperties(e.subjectInst.uri).then(function(t){n.debug("PROPERTIES (inverse) loaded for "+e.subjectInst.uri,t),a.refresh(),e.subjectInst.$availableProperties=_.union(e.subjectInst.$availableProperties,t)}).catch(function(e){n.error("An error occurred: ",e)}),e.addProperty=function(){var t=angular.copy(e.propertySelected);t.filterExists=!0,t.hasFilter=!1,t.arithmetic=null,t.compareRaw={},t.link=null,t.view=!0,t.optional=!1,t.arithmetic=null,t.compare=null,s.push(t),e.propertySelected=void 0,e.subjectInst.showAddProperty=!1},e.doesAliasExist=function(e){return _.filter(s,{alias:e}).length>0},e.removeProperty=function(e){s.splice(s.indexOf(e),1)},e.addAggregate=function(){e.subjectInst.$selectedAggregates.push(angular.copy({alias:"cnt",operator:"COUNT",type:"AGGREGATE_PROPERTY",link:null,available:angular.copy(o.aggregateFunctions)})),e.subjectInst.showAddProperty=!1},e.removeAggregate=function(t){e.subjectInst.$selectedAggregates.splice(e.subjectInst.$selectedAggregates.indexOf(t),1)}}]),angular.module("GSB.controllers.main",["GSB.config","ngTable"]).controller("MainCtrl",["$scope","$log","globalConfig","$http","$translate","languageStorage","EndPointService","ngTableParams","$filter",function(e,t,r,n,a,o,i,s,l){var c;e.changeLanguage=function(e){c=e,a.use(e)},n.get("locale.json").success(function(e){o.mergeLanguages(e),a.refresh()}),e.showArea="workspace",e.initialisedSubjects=!1,e.offsetX=0,e.offsetY=0,e.mouseDownAct=!1,e.theMouseDown=function(t){e.offsetX=0,e.offsetY=0,e.startX=t.pageX,e.startY=t.pageY,e.mouseDownAct=!0},e.theMouseMove=function(t){e.mouseDownAct&&(e.offsetX=t.pageX-e.startX,e.offsetY=t.pageY-e.startY,e.startX=t.pageX,e.startY=t.pageY)},e.theMouseUp=function(){e.offsetX=0,e.offsetY=0,e.mouseDownAct=!1},e.resultHead=[],e.resultData=[],e.$on("SPARQLUpdateEvent",function(t,r){i.runSponateMap(r).then(function(t){e.resultHead=[],e.resultData=_(t).chain().pluck("val").pluck("rows").flatten(!0).value(),_(e.resultData).chain().map(function(e){return _.keys(e)}).flatten().uniq().value().forEach(function(t){"id"!==t&&e.resultHead.push({title:t,field:t,visible:!0,sortable:t})}),e.$apply()})});var p=function(){return angular.copy(e.resultData)};e.resultType=function(e){return _.isString(e)?"string":_.isDate(e)?"date":_.isObject(e)?e.hasOwnProperty("id")&&e.hasOwnProperty("label")?"uri":e.hasOwnProperty("lexicalValue")&&e.hasOwnProperty("datatypeUri")?"lexicalValue":"object":void 0},e.extractLabelFromURI=function(e){return i.extractLabelFromURI(e)},e.tableParams=new s({page:1,total:0,count:10,sorting:{},filter:{}},{getData:function(t,r){var n=r.filter()?l("filter")(p(),r.filter()):p(),a=r.sorting()?l("deepOrderBy")(n,r.orderBy()):n;e.tlength=a.length,t.resolve(a.slice((r.page()-1)*r.count(),r.page()*r.count()))},$scope:{$data:{}}}),e.$watchCollection("resultData",function(){e.tableParams.reload()}),e.$watch("tlength",function(t){e.tableParams.total(t),e.tableParams.reload()}),e.translate=function(){e.$broadcast("translationEvent",c)},e.saveJSON=function(){e.$broadcast("saveJsonEvent")},e.resetWorkspace=function(){e.clearWorkspace()},e.loadJSON=function(){e.resetWorkspace(),e.$broadcast("loadJsonEvent")},e.initializeWorkspace=function(){t.debug("Initialized Workspace"),e.translatedJSON="In the near future the translated JSON will be here.",e.translatedSPARQL="In the near future the translated SPARQL will be here.",e.expertView=!1},e.clearWorkspace=function(){t.debug("Cleared Workspace"),e.$broadcast("removeAllSubjectsEvent"),e.translatedJSON="In the near future the translated JSON will be here.",e.translatedSPARQL="In the near future the translated SPARQL will be here.",e.expertView=!1},e.initializeWorkspace(),e.$on("enableButton",function(){e.disableRun=!1}),e.$on("disableButton",function(){e.disableRun=!0}),e.openInNewTab=function(){var t=window.open(r.resultURL+encodeURIComponent(e.translatedSPARQL),"_blank");t.focus()}}]).filter("deepOrderBy",function(){return function(e,t){if(0===t.length)return e;var r=1;return _.startsWith(t[0],"-")&&(r=-1),t=t[0].substring(1),e.sort(function(e,n){return r*e[t].value.localeCompare(n[t].value)})}}),angular.module("GSB.filters",["GSB.config"]).filter("aggregatePropertyFilter",function(){return function(e,t){return null!==t&&void 0!==t&&t.hasOwnProperty("restrictTo")&&null!==t.restrictTo?e.filter(function(e){return e.type===this.restrictTo},t):e}}).filter("objectPropertyFilter",function(){return function(e,t,r){return null===t||void 0===t||"object"!=typeof r||0===r.length?e:e.filter(function(e){if(void 0===e[this.key])return!0;for(var t=0,r=this.filter.length;r>t;t++)if(-1!==e[this.key].indexOf(this.filter[t]))return!0;return!1},{key:t,filter:r})}}).filter("replaceURIsWithPrefixes",["globalConfig",function(e){return function(t){for(var r in e.prefixes)if(e.prefixes.hasOwnProperty(r)){var n=new RegExp("<?"+e.prefixes[r]+"(\\w+)>?","ig");t=t.replace(n,r+":$1")}return t}}]).filter("beautifySPARQL",function(){return function(e){return e.replace(/<http:\/\/www.w3.org\/1999\/02\/22-rdf-syntax-ns#type>/gi,"a").replace(/where\s+/gi,"WHERE \n").replace(/limit/gi,"LIMIT").replace(/ +\.\s+/gi," .\n").replace(/ +;\s+/gi," .\n").replace(/\{/gi,"\n{\n").replace(/}\s+/gi,"\n}\n").replace(/^\?/gim,"	?").replace(/^FILTER/gim,"	FILTER").replace(/^BIND/gim,"	BIND").replace(/select distinct\s+/gi,"SELECT DISTINCT \n")}}),angular.module("GSB.config",[]).constant("globalConfig",{name:"STANDARD_CONFIG",propertyTypeByType:{"http://www.w3.org/2002/07/owl#ObjectProperty":"OBJECT_PROPERTY"},propertyTypeByRange:{"http://gsb.leipert.io/ns/":"OBJECT_PROPERTY","http://xmlns.com/foaf/0.1/":"OBJECT_PROPERTY","http://www.w3.org/2001/XMLSchema#(integer|float|double|decimal|positiveInteger|nonNegativeInteger)":"NUMBER_PROPERTY","http://www.w3.org/2001/XMLSchema#(string|literal)":"STRING_PROPERTY","http://www.w3.org/2001/XMLSchema#date":"DATE_PROPERTY"},prefixes:{rdfs:"http://www.w3.org/2000/01/rdf-schema#",foaf:"http://xmlns.com/foaf/0.1/",owl:"http://www.w3.org/2002/07/owl#",gsb:"http://gsb.leipert.io/ns/"},defaultGraphURIs:["http://xmlns.com/foaf/0.1/","http://gsb.leipert.io/ns/"],baseURL:"https://ssl.leipert.io/sparql",resultURL:"https://ssl.leipert.io/sparql?default-graph-uri=&format=text%2Fhtml&timeout=5000&debug=on&query=",allowedLanguages:["*","de","en"],fallBackLanguages:["en"],aggregateFunctions:[{alias:"cnt",operator:"COUNT(%alias%)",restrictTo:null},{alias:"sum",operator:"SUM(%alias%)",restrictTo:"NUMBER_PROPERTY"},{alias:"min",operator:"MIN(%alias%)",restrictTo:"NUMBER_PROPERTY"},{alias:"max",operator:"MAX(%alias%)",restrictTo:"NUMBER_PROPERTY"},{alias:"avg",operator:"AVG(%alias%)",restrictTo:"NUMBER_PROPERTY"},{alias:"gct",operator:'GROUP_CONCAT(%alias%,",")',restrictTo:"STRING_PROPERTY"}],endPointQueries:{getDirectProperties:"<%uri%> (rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?class .?uri rdfs:domain ?class .OPTIONAL { ?uri rdfs:range ?range }  .OPTIONAL { ?uri rdf:type ?type }  .OPTIONAL { ?uri rdfs:label ?label . BIND(LANG(?label) AS ?label_loc) } .OPTIONAL { ?uri rdfs:comment ?comment . BIND(LANG(?comment) AS ?comment_loc) } .FILTER ( !isBlank(?class) && !isBlank(?uri) && !isBlank(?range) ) ",getInverseProperties:"<%uri%> (rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?class .?uri rdfs:range ?class .OPTIONAL { ?uri rdfs:domain ?range }  .OPTIONAL { ?uri rdf:type ?type }  .OPTIONAL { ?uri rdfs:label ?label . BIND(LANG(?label) AS ?label_loc) } .OPTIONAL { ?uri rdfs:comment ?comment . BIND(LANG(?comment) AS ?comment_loc) } .FILTER ( !isBlank(?class) && !isBlank(?uri) && !isBlank(?range) ) ",getSuperAndEqClasses:"<%uri%> (rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?uri FILTER ( !isBlank(?uri) )",getSubAndEqClasses:"<%uri%> (^rdfs:subClassOf|(owl:equivalentClass|^owl:equivalentClass))* ?uri FILTER ( !isBlank(?uri) )",getAvailableClasses:"{?uri a rdfs:Class .} UNION {?uri a owl:Class .} .FILTER ( !isBlank(?uri) )OPTIONAL { ?uri rdfs:label ?label . BIND(LANG(?label) AS ?label_loc) } .OPTIONAL { ?uri rdfs:comment ?comment . BIND(LANG(?comment) AS ?comment_loc)} "}}),angular.module("GSB.config").config(["globalConfig",function(e){e.name="GSB_CONFIG"}]);