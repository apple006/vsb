box: leipert/ubuntu14.04-webessentials@2.0.1
# Build definition
build:
  # The steps that will be executed on build
  steps:
    # A step that executes `npm install` command
    - script:
        name: Copying config
        code: cp $CONFIG_FILE app/overwrite.js
    - npm-install
    - leipert/yeoman-bower-install
    - script:
        name: Test and build gsb
        code: gulp
    - script:
        name: Copying config
        code: mkdir -p dist/config && cp -r config/* dist/config/ && cp bower.json dist/
    - script:
        name: Delete unneeded files
        code: ls -A | grep -v dist | grep -v landing | xargs rm -rf

deploy:
  steps:
    - leipert/git-push:
         gh_oauth: $GH_TOKEN
         gh_pages: true
         basedir: dist
    - leipert/git-push:
         gh_oauth: $GH_TOKEN
         branch: dist
         basedir: dist
         tag: bower
         tag_overwrite: true